<odoo>
    <data>
        <template id="countries" name="Trademeda Countries">
         <xpath expr="." position="inside">
            <link rel="stylesheet" type="text/css" href="/trademeda/static/src/css/countries.css"/>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
        </xpath>

        <t t-call="trademeda.header"/>
        <div class="tab-buttons">
            <button onclick="buyer_countries(this)" class="active">Buyer</button>
            <button onclick="supplier_countries(this)" class="">Supplier</button>

        </div>
        <main class="">
            <div id="buyer_countries" class="buyer_countries" style="display:flex;flex-wrap:wrap;flex-direction: column;">
                <t t-set="countries_with_buyers" t-value="[
                    (country, env['res.partner'].sudo().search_count([('country_id', '=', country.id), ('member_type', 'in', ['buyer', 'both'])]))
                    for country in env['res.country'].sudo().search([])
                ]"/>
                <t t-set="sorted_countries_with_buyers" t-value="sorted(countries_with_buyers, key=lambda x: x[1], reverse=True)"/>
                <t t-foreach="sorted_countries_with_buyers" t-as="country">
                    <div><a style="text-decoration:none;color:inherit;" t-attf-href="/findBuyers/country/{{country[0].id}}"><t t-esc="country[0].name"/></a><span> (<t t-esc="country[1]"/>)</span></div>
                    <!-- <div class="country-card">
                        <div><a style="text-decoration:none;color:inherit;" t-attf-href="/findBuyers/country/{{country[0].id}}"><t t-esc="country[0].name"/></a></div>
                        <div><span><t t-esc="country[1]"/></span></div>
                    </div> -->
                </t>
            </div>
            <div id="supplier_countries" class="supplier_countries" style="display:none;flex-wrap:wrap;flex-direction: column;">
                <t t-set="countries_with_suppliers" t-value="[
                    (country, env['res.partner'].sudo().search_count([('country_id', '=', country.id), ('member_type', 'in', ['seller', 'both'])]))
                    for country in env['res.country'].sudo().search([])
                ]"/>
                <t t-set="sorted_countries_with_suppliers" t-value="sorted(countries_with_suppliers, key=lambda x: x[1], reverse=True)"/>
                <t t-foreach="sorted_countries_with_suppliers" t-as="country">
                    <div ><a style="text-decoration:none;color:inherit;" t-attf-href="/findSuppliers/country/{{country[0].id}}"><t t-esc="country[0].name"/></a><span> (<t t-esc="country[1]"/>)</span></div>
            
                    <!-- <div class="country-card">
                        <div><a style="text-decoration:none;color:inherit;" t-attf-href="/findSuppliers/country/{{country[0].id}}"><t t-esc="country[0].name"/></a></div>
                        <div><span><t t-esc="country[1]"/></span></div>
                    </div> -->
                </t>
            </div>
        </main>
        <script>
                function buyer_countries(element){
                    const buyer_countries = document.getElementById('buyer_countries')
                    const supplier_countries = document.getElementById('supplier_countries')
                    buyer_countries.style.display = 'flex'
                    supplier_countries.style.display = 'none'
                    element.classList.add('active')
                    element.nextElementSibling.classList.remove('active');



                }
                function supplier_countries(element){
                    const buyer_countries = document.getElementById('buyer_countries')
                    const supplier_countries = document.getElementById('supplier_countries')
                    buyer_countries.style.display = 'none'
                    supplier_countries.style.display = 'flex'
                    element.classList.add('active')
                    element.previousElementSibling.classList.remove('active');


                }
        </script>

        </template>
    </data>
</odoo>